# Simple МТС Game ТЗ

## Виды карт

Полная колода карт для игры МТС
Всего в игре 108 карт:

* Карты 4 цветов (синий, жёлтый, красный, зелёный) с номерами от 0 до 9 (76 шт, с цифрами от 1 до 9, по две одинаковых на каждый цвет, и четыре карты разных цветов с цифрой 0) — обычные карты.
* 8 карт «Возьми две», 8 карт «Ход обратно», 8 карт «Пропусти ход» по 2 на каждый цвет — карты действия.
* 4 карты «Заказать цвет», 4 карты «Возьми четыре» на чёрном фоне — карты действия (дикие карты).

## Механика настольной игры и основные правила

### Игроки
* Игрок должен быть реализован
  * классом со свойствами Имя, Карты на руках, Ход Завершен
  * с методом Сделать Ход, который должен иметь опциональный параметр Карта для хода 
  * с методом Взять Карту, который должен иметь параметр Кол-ва карт
  * Имя игрока-человека задается в начале игры и передается в конструктор класса Игрока
* Бот должен наследоваться от класса Игрока
  * Имя бота задается автоматом в начале игры и передается в конструктор класса Игрока вида Бот1, Бот2,...БотN
  * вызов метода Сделать Ход не передает карту, а выбирает извлекает ее с руки в попытке подобрать
  * вызывает метод Взять Карту (1), если перебрал все перебрал с руки безуспешно
  * делает вызов метода Сделать Ход с взятой только что картой
  * Вне зависимости от результата Валидации свойству Ход Завершен проставляется True


* Бот имитирует мыслительный процесс и ожидает хода 5сек (параметр или свойство класса)
* Игрок должен иметь метод Крикнуть "МТС" с записью в свойство игрока Крикнуто=True 
* Бот должен иметь также метод Крикнуть "МТС" и кричать с вероятностью 30%, если после его хода осталась одна карта
* У игрока-человека должна быть возможность видеть отрисованные свои карты с порядковыми номерами
* У игрока-человека должна быть возможность выбрать карту для хода по номеру
* У игрока должна быть возможность выбрать карту для хода по номеру, стрелками, любым способом
* У игрока-человека должна быть всегда возможность вызвать метод Крикнуть "МТС" после сразу после его хода
* Ход игрока заканчивается и переход хода осуществляется только в случае аксепта карты Столом
  * Валидация Хода проставляет в случае успеха свойство Игрока Ход Завершен в True

### Колода и стол
* Создается класс Стол, у которого в свойствах есть экземпляры класса Прикуп и Сброс
* Формируется колода Прикупа из 108 карт, описанных выше
  * Инициализируется экземпляр класса Прикуп
  * Реализован метод для доставания N карт
  * Каждая карта представляет собой Класс с базовым методом отрисовки
  * Каждая Цветная карта наследуется от Базовой карты и имеет свойства Цвет и Номер
  * Каждая Специальная карта имеет свойство действия
  * Для Цветов, Номеров и Действий должны быть созданы Enum классы
* Прикуп перемешивается (shuffle)
  * Реализован специальный метод, который применяет шафл на (пере)создании экземпляра класса Прикупа
* Сдаётся по 7 карт каждому играющему
  * Число 7 должно быть свойством класса Стола
  * Реализован метод Раздача карт у Класса Стол, который в цикле до 7 по очереди в структуре Игроков дергает у каждого метод Взять карту
  * Каждому игроку в его экземпляр класс в параметры записываются розданные карты (классы карт с их свойствами и действиями)
* Первая карта достается из Прикупа после раздачи игрока и кладется на стол, формируя первую карту Сброса
  * Инициализируется класс Сброс с пустым свойством карт
  * Реализован метод у Прикупа достать карту с указанием кол-ва 
  * Реализован метод Сделать Ход, в который в этом случае передается взятая из Прикупа карта
  * Валидация пропускается здесь ибо не с чем валидировать
  * Карта из первого автохода становится первой картой свойства "карты" экземпляра класса Сброса
  * Записывается свойство Текущая карта для класса Стол 
* Прикуп остается как есть из оставшихся в нем карт после всех раздач и первого автохода
* Сброс представляет собой класс со свойствами и методами валидации хода и добавлением карт или возвратом их обратно игроку:
  * Метод валидации принимает на вход карту и игрока и определяет можно или нельзя было положить ту или иную карту Хода
  * Метод валидации либо аксептит карту и применяет ее действие либо возвращает ее обратно этому игроку перезапуская его ход
* Использованные карты сбрасываются в Сброс, на начало игры в Сбросе только первая карта

### Ход игры
* Кол-во игроков задается при старте игры от 2 до 10 (argparse c установленными возможными значениями)
* Реализовать класс Игры:
  * Создает экземпляры классов игроков с запросом их имени (ввод для человека и авто для ботов)
  * Формирует структуру очереди (к примеру deque) из игроков и шафлит их
  * Формирует Классы Стола с классами Сброс и Прикупа в его свойствах
  * Записывает все сформированное в свои свойства
  * Должен быть реализован метод Перехода хода (например, iterator или deque.rotate())
  * Реализован метод Валидация
* В свой ход каждый игрок должен положить карту в игровую колоду, при этом карта должна совпадать с верхней картой в игровой колоде по цвету или по картинке.
  * Вызывается метод "Сделать Ход" у Игрока
  * Вызывается метод "Валидация" у Игры
  * В случае успешной Валидации хода:
    * Карта с успешного хода добавляется в Сброс
    * Карта с успешного хода записывается в Текущую карту Стола
    * Вызывается метод "Применить действие" у Стола, берущее действие у Текущей Карты
    * Вызывается метод "Переход Хода" у Игры
    * Вызывается метод "Взять Карту" у игрока с передачей Текущей карты из Валидации в случае ее неуспешности
* Если у игрока нет подходящей карты, то он берёт одну карту из колоды банка и, если она подходит, он может сделать ход только этой картой, или забрать на руку.
  * Дергается метод Взять карту из Прикупа
  * Бот всегда будет пробовать ее положить на стол в Сброс
  * Человек решает сам ходить ей или положить в руку 
    * должна быть реализована возможность выбрать Положить на стол (аналог методу Ход с указанием выбранной карты) или Взять в руку  
* Игрок может пойти в свой ход картой на чёрном фоне (специальной) независимо от того, какая карта лежит сейчас верхней в игровой колоде. 
* Когда игрок кладёт в Сброс свою предпоследнюю карту, то он должен сказать «МТС!» до начала следующего хода следующего игрока
* Если игрок не сказал этого до начала хода следующего игрока (Боты думают 5сек), то он берёт 2 карты из основной колоды Прикупа
* Стол проверяет кол-во карт я прошлого игрока и условие Крикнутого слова МТС и выдает 2 карты этому игроку, если не было выкрикнуто, а если было то сбрасывает свойство Крикнуто в False.
* Если основная колода Прикупа закончилась:
  * верхняя карта Сброса остается
  * все остальные тасуются, переворачиваются и становятся новой колодой Прикупа
* Игра продолжается
* Раунд выигрывает игрок, сбросивший все карты.

### Карты действий и их назначение
* Ход обратно — направление хода меняется
  * Реализовать изменением направления структуры игроков (к примеру deque.rotate(-1))
* Пропусти ход — следующий по направлению игры игрок пропускает ход
  * Реализовать сдвигом в структуре игроков (к примеру deque.rotate())
* Возьми две — следующий по направлению игры игрок берёт 2 карты из колоды банка и пропускает свой ход.
  * Реализовать вызовом метода взять карту с параметром кол-ва и метода сдвига в структуре игроков
* Закажи цвет — игрок заказывает цвет и следующий по направлению игры игрок должен сделать ход либо картой заказанного цвета, либо карту с чёрным фоном
  * Реализовать выбор цвета боту как максимальный по кол-ву цветных карт на руках или рандом, если цветных карт или одинаково или только спец карты
  * Реализовать выбор человеку игроку - отрисовать цвета и дать стрелками клавиатуры или номерами выбрать цвет
  * Реализовать вызов метода для изменения свойства текущий карты Сброса на выбранный
* Закажи цвет + возьми четыре — игрок заказывает цвет и следующий по направлению игры игрок берёт 4 карты из колоды и пропускает ход
  * Реализовать совокупностью действий "заказать цвет" с передачей цвета и "взять крату" с передачей цифры 4
